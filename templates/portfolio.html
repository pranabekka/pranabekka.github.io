{% extends "base.html" %}

{% block title %}
{{ page.title }} - {{ config.title }}
{% endblock %}

{% block content %}

<h1>{{ page.title }}</h1>

<p class="subtitle">
  Created: {{ page.date | date(format="%Y-%m-%d") }}
  {%- if page.updated | date(format="%Y-%m-%d") != page.date | date(format="%Y-%m-%d") -%}
    <br>
    Last Updated: {{ page.updated | date(format="%Y-%m-%d") }}
  {%- endif -%}
</p>

<div class="folio-grid">

  {% set dated_backlinks = [] %}
  {% for backlink in page.backlinks %}
    {% set basename = backlink.permalink | split(pat="/") | nth(n=3) %}
    {% set name = basename ~ ".md" %}
    {% set backlink_page = get_page(path=name) %}
    {% set_global dated_backlinks =
      dated_backlinks | concat(with=backlink_page.date ~ "/" ~ name) %}
  {% endfor %}

  {% for backlink in dated_backlinks | sort %}
    {% set name = backlink | split(pat="/") | last %}
    {% set backlink_page = get_page(path=name) %}
    <a href="{{ backlink_page.permalink }}">
      <img src="{{ config.base_url }}/{{ backlink_page.extra.thumb }}">
      {{ backlink_page.title }}
    </a>
  {% endfor %}

</div>

{% endblock content %}
