<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https:&#x2F;&#x2F;pranabekka.github.io/style.css">
  <link rel="icon" href="https:&#x2F;&#x2F;pranabekka.github.io/favicon.svg?v=2">
  <link rel="me" href="https://mastodon.social/@pranabekka">
  <link type="application/atom+xml" rel="alternate" href="https:&#x2F;&#x2F;pranabekka.github.io/atom.xml" title="Pranab&#x27;s site">
  <title>
Program representation (6)
 - Pranab‚Äôs site

</title>
</head>

<body>
  <main>
      

<h1>Program representation (6)
</h1>


<p class="subtitle">
  On
  <img src="/favicon.svg" id="icon">
  <a href=https:&#x2F;&#x2F;pranabekka.github.io>
    Pranab‚Äôs site

  </a>
</p>

<p class="subtitle">
  
    <strong>DRAFT</strong> (needs work or removal)
  
</p>



  <details class="contents">
    <summary>Show/Hide contents</summary>
    <ol>
    
      <li>
        <a href="https://pranabekka.github.io/drafts/prog-rep-6/#the-pieces">The pieces</a>
        
      </li>
    
      <li>
        <a href="https://pranabekka.github.io/drafts/prog-rep-6/#assembly">Assembly</a>
        
      </li>
    
    </ol>
  </details>

<hr>

<p>Visual programming is <em>so close</em> to text programming.</p>
<p>Have a look at the following
code snippet and visual code.</p>
<pre class="z-code"><code><span class="z-text z-plain">for fruit [&quot;orange&quot; &quot;banana&quot;]
	peel fruit
	eat fruit
</span></code></pre>
<p><img src="/prog-rep-blocks-unbracketed.svg" alt="Block representation of above code" /></p>
<p>These are representations of the same program
in the same programming language.
I think their relation should be obvious.</p>
<p>If I gave you the following visual representation,
could you guess its text representation?</p>
<p><img src="/prog-rep-guess.svg" alt="Block representation for code hidden below" /></p>
<details><summary>Answer</summary>
  <pre class="z-code"><code><span class="z-text z-plain">let name &quot;world&quot;
greet name
</span></code></pre>

</details>
<p>The key feature is that the visual representation
is backed by the text representation
<em>stored in a plain text file</em>.
You can version control this file,
edit it with text code editors,
<code>grep</code> and <code>cat</code> the file,
drag blocks around with your mouse
and snap them together to edit it,
and share the file with other people.
There‚Äôs no conversion, exporting, or importing.</p>
<p>Like how one person can write Markdown in Vim
while another edits the file in a GUI app,
one person can write code in Vim
while another snaps blocks together in a GUI app.
And they can both use these files directly.</p>
<p>People can use a visual editor
to learn programming without syntax errors.
They can create packages used by text programmers.
They can share code snippets.
They can tap into the experience of text programmers.</p>
<p>These connected representations
provide first-class visual programming
and <em>collaboration</em> with text programmers.</p>
<p>The rest of this post describes
how I arrived at these two interconnected representations,
and ends with a brief list of possible enhancements.</p>
<h2 id="the-pieces">The pieces<a class="zola-anchor" href="#the-pieces" aria-label="Anchor link for: the-pieces">üîó</a></h2>
<p>Using the CLI was my first taste of ‚Äúreal programming‚Äù ‚Äî
things of utility instead of games in Scratch
or guided tutorials in ‚Äúproper‚Äù languages.
I was able to automate in minutes
what might take me an hour or more of manual work.
When I first learnt the CLI,
I remember thinking it was the superior interface,
but slowly accepting the world would never adopt it,
because it does have several issues.
Yet this idea of everyday scripting has haunted me.</p>
<p>I see small opportunities for little scripts all the time,
where I might see someone manually filtering some data
then using an ad-ridden website to pick randomly.
I wonder, if they had the right building blocks,
could they write a simple script?
What about renaming a bunch of files?</p>
<p>I see some of this potential in Scratch.
Scratch provides structural editing,
where users don‚Äôt mess with syntax bits
like brackets, commas, and semi-colons.
Instead, they focus on their program.
It‚Äôs a great way to learn programming.</p>
<p>What finally helped start this project
was my fascination with S-expressions.
It‚Äôs a bit like CLI syntax,
but with more brackets and expressive names.
Similar to what I showed in the first example,
a <code>for</code> loop is a special type of command
that uses the same syntax rules as functions.
Clojure‚Äôs evolved S-expressions
to include square and curly brackets,
adopted from C-style syntaxes for lists and maps,
which helped make S-expressions clearer,
as it becomes easy to see the difference
between function calls, lists, and maps.</p>
<p>The rise of auto-formatting is the final piece.
For some time, I was stuck on
‚ÄúHow do you encode the positions of blocks in text?‚Äù
Do you litter it with comments of co-ordinates?
The answer is you don‚Äôt!
If we lay the blocks out automatically,
we focus on the structure of the program,
similar to writing markup to represent
the structure of our writing instead of its presentation.
Deriving presentation from structure
is key for implementing usable visual programming
that seamlessly interoperates with text.</p>
<h2 id="assembly">Assembly<a class="zola-anchor" href="#assembly" aria-label="Anchor link for: assembly">üîó</a></h2>
<p>The start of a syntax with easy translation,
for the program drawing blocks
and the user reading blocks, or text,
is a syntax that is consistent.
Here are the basic rules for Clojure‚Äôs syntax:</p>
<ul>
<li>
<p>Spaces separate keywords and brackets group them</p>
<pre class="z-code"><code><span class="z-text z-plain">(greet (join first_name last_name) )
</span></code></pre>
<p>The first opening round bracket starts a group.
In that group there‚Äôs two items
separated by spaces:
<code>greet</code> and <code>(join first_name last_name)</code>.</p>
<p>That second item is also grouped together
with round brackets.
In that group, there are three items
separated by spaces:
<code>join</code>, <code>first_name</code>, and <code>last_name</code>.</p>
</li>
<li>
<p>A function call uses round brackets.</p>
<pre class="z-code"><code><span class="z-text z-plain">(greet reader)
</span></code></pre>
<p>The first item in the brackets is a function
that is given the other items as arguments.
<code>greet</code> is a function,
and <code>reader</code> is a variable
passed to it as an argument.
Hi, you!</p>
</li>
<li>
<p>A list uses square brackets.</p>
<pre class="z-code"><code><span class="z-text z-plain">[&quot;orange&quot; &quot;banana&quot;]
</span></code></pre>
<p>This syntax is familiar to most programmers.
The major difference is the missing commas,
but we always separate them with spaces anyway,
so the commas are redundant.</p>
<p>Like functions, we group things with square brackets
and we separate things with spaces.</p>
</li>
<li>
<p>Key-value pairs use curly brackets.</p>
<pre class="z-code"><code><span class="z-text z-plain">{ name: &quot;Alden Thorn&quot; age: 16 }
</span></code></pre>
<p>This syntax is also familiar,
and uses the same rules as the other brackets:
brackets to group and spaces to separate.</p>
</li>
</ul>
<p>The cool thing about this is that core language constructs,
like variable declarations, <code>if</code> statements, and <code>for</code> loops,
all use the same syntax rules,
so users and visual editors can easily translate them.
We only need to learn one syntax construct for everything,
instead of remembering all the keywords and brackets.</p>
<p>To turn them into blocks,
we simply sprinkle in some icons
and turn the brackets into border shapes.</p>
<p><img src="/prog-rep-sample-all.svg" alt="Sample of function call, key-value pair, and list" /></p>
<p>Round brackets for function calls
become round borders at each end,
curly brackets for key-value pairs
become curly borders,
and square brackets for lists
become flat borders at the ends,</p>
<p>Now, here‚Äôs an example with nested function calls
using the Clojure-like text syntax:</p>
<pre class="z-code"><code><span class="z-text z-plain">(for fruit [&quot;orange&quot; &quot;banana&quot;]
	(peel fruit)
	(eat fruit)
)
</span></code></pre>
<p>It looks fine, but doesn‚Äôt work as well with blocks:</p>
<p><img src="/prog-rep-blocks-hanging.svg" alt="Block representation of above code" /></p>
<p>The cut edges look odd and complicated for other themes,
and even though the unsightly hanging edges can be fixed
with typical S-expression formatting,
there‚Äôs a neater solution to both with low cost.
We could stop here,
but S-expressions seem to turn off a lot of people,
and I‚Äôve seen beginners do horrifying things with brackets.
Anyway, on to the low cost solution.</p>
<p>This is what I‚Äôd like the blocks to look like:</p>
<p><img src="/prog-rep-blocks-indented.svg" alt="Block representation of above code" /></p>
<p>Changes to the visual representation
should be reflected in the text representation,
so indented lines belong to
the previous less indented line.</p>
<pre class="z-code"><code><span class="z-text z-plain">(for fruit [&quot;orange&quot; &quot;banana&quot;])
	(peel fruit)
	(eat fruit)
</span></code></pre>
<p>The placement of the round brackets is a bit odd,
and doesn‚Äôt really convey extra information,
so while we‚Äôre moving those brackets around,
let‚Äôs just remove some of them.</p>
<pre class="z-code"><code><span class="z-text z-plain">for fruit [&quot;orange&quot; &quot;banana&quot;]
	peel fruit
	eat fruit
</span></code></pre>
<p>We‚Äôll have the first item on a line
be a function or statement,
with other items and indented lines
provided to it as arguments.</p>
<p>And then we reflect those changes back
to the visual representation.</p>
<p><img src="/prog-rep-blocks-unbracketed.svg" alt="Block representation of above code" /></p>
<p>We simply copy the border styles
of unbracketed expressions
like strings and variables.</p>
<p>This is what you saw at the top of this post.</p>
<pre class="z-code"><code><span class="z-text z-plain">for fruit [&quot;orange&quot; &quot;banana&quot;]
	peel fruit
	eat fruit
</span></code></pre>
<p><img src="/prog-rep-blocks-unbracketed.svg" alt="Block representation of above code" /></p>
<p>Now we have a solid foundation
for building a visual code editor
that can be used directly alongside text editors.</p>
<p>Here‚Äôs some future directions to ponder
as I put together posts and designs for them,
in rough order of importance for beginners:</p>
<ul>
<li>
<p>Widgets to edit various data types,
like colour pickers for colours,
calendars for dates,
and graphs for co-ordinates.</p>
</li>
<li>
<p>MIT Scratch as a library/module.
L√ñVE, the game framework, in a block editor.</p>
<p><a href="https://love2d.org">L√ñVE</a></p>
</li>
<li>
<p>Integration with other scripting environments,
like spreadsheets and interactive notebooks,
or browser and office suite extensions/plugins.</p>
</li>
<li>
<p>REPL and interactive debugger.</p>
</li>
<li>
<p>In-editor documentation generated from doc comments
and displayed in the block selection panel.</p>
</li>
<li>
<p>Package/project manager
interoperating with CLI tool.</p>
</li>
<li>
<p>Auto-complete with fuzzy matching.</p>
</li>
<li>
<p>Keyboard shortcuts during editing
like <code>&quot;</code> to begin or end a string block,
<code>[</code> to start a list,
or <code>Shift + Tab</code> to de-indent a line.</p>
</li>
<li>
<p>Vim inspired normal mode shortcuts.</p>
</li>
</ul>











  </main>
  <footer>
    <nav>
      <a href="https:&#x2F;&#x2F;pranabekka.github.io/about#contact">Feedback</a>
      <a href="https:&#x2F;&#x2F;pranabekka.github.io">Home</a>
      <a href="#">Go to top ‚Üë</a>
      
<a href="https://github.com/pranabekka/pranabekka.github.io/blob/main/content&#x2F;drafts&#x2F;prog-rep-6.md">
  Page source
</a>

    </nav>
  </footer>
</body>

</html>
